<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Barcode Registry — Architecture</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; margin: 24px; color: #111; }
    h1 { font-size: 20px; }
    .note { margin-bottom: 12px; color: #444; }
    .svg-wrap { border: 1px solid #ddd; padding: 12px; background: #fff; }
  </style>
</head>
<body>
  <h1>Barcode Registry — Architecture</h1>
  <p class="note">Topology: Browser (presentation/app.js)  MetaMask (EIP-1193 provider)  Hardhat RPC  Deployed contract (BarcodeRegistry). Events are read back by the UI via provider/queryFilter().</p>

  <div class="svg-wrap">
    <!-- Inline SVG architecture diagram -->
    <?xml version="1.0" encoding="UTF-8"?>
    <svg xmlns="http://www.w3.org/2000/svg" width="1000" height="600" viewBox="0 0 1000 600">
      <style>
        .box { fill:#f6f8fa; stroke:#333; stroke-width:2; rx:8; }
        .title { font: 18px sans-serif; font-weight:700; }
        .label { font: 14px sans-serif; }
        .arrow { stroke:#333; stroke-width:2; fill:none; marker-end:url(#arrowhead); }
      </style>
      <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
        </marker>
      </defs>
      <rect x="40" y="40" width="260" height="120" class="box" />
      <text x="170" y="70" text-anchor="middle" class="title">Browser / Front-end</text>
      <text x="170" y="95" text-anchor="middle" class="label">presentation/index.html + app.js</text>

      <rect x="360" y="40" width="200" height="120" class="box" />
      <text x="460" y="70" text-anchor="middle" class="title">MetaMask</text>
      <text x="460" y="95" text-anchor="middle" class="label">EIP-1193 provider / signer</text>

      <rect x="600" y="40" width="320" height="120" class="box" />
      <text x="760" y="70" text-anchor="middle" class="title">Hardhat Node (Local RPC)</text>
      <text x="760" y="95" text-anchor="middle" class="label">http://127.0.0.1:8545 (chainId 31337)</text>

      <path d="M300 100 L360 100" class="arrow" marker-end="url(#arrowhead)" />
      <path d="M560 100 L600 100" class="arrow" marker-end="url(#arrowhead)" />

      <rect x="360" y="220" width="560" height="200" class="box" />
      <text x="640" y="250" text-anchor="middle" class="title">BarcodeRegistry (Deployed Contract)</text>
      <text x="640" y="280" text-anchor="middle" class="label">stores: products, producers allowlist, owner</text>
      <text x="640" y="300" text-anchor="middle" class="label">functions: addProducer, removeProducer, registerProduct, verifyProduct</text>

      <path d="M760 160 L760 220" class="arrow" marker-end="url(#arrowhead)" />

      <rect x="40" y="460" width="260" height="80" class="box" />
      <text x="170" y="490" text-anchor="middle" class="title">Events & Logs</text>
      <text x="170" y="510" text-anchor="middle" class="label">ProductRegistered, ProducerAdded, ProducerRemoved</text>

      <path d="M640 420 L300 460" class="arrow" marker-end="url(#arrowhead)" />

      <rect x="360" y="440" width="320" height="120" class="box" />
      <text x="520" y="470" text-anchor="middle" class="title">Dev Tools</text>
      <text x="520" y="495" text-anchor="middle" class="label">Hardhat CLI - compile/deploy</text>
      <text x="520" y="515" text-anchor="middle" class="label">scripts/*.js (deploy, helpers)</text>

      <path d="M640 420 L520 440" class="arrow" marker-end="url(#arrowhead)" />

      <text x="500" y="590" text-anchor="middle" class="label">Local topology: Browser  MetaMask  Hardhat RPC  Contract; events read back by UI via provider/queryFilter()</text>
    </svg>
  </div>

  <p class="note">Open this file in a browser to view the diagram: <code>file://&lt;repo_path&gt;/barcode/docs/architecture.html</code> or serve the `docs/` folder via a static server.</p>
</body>
</html>
